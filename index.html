<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>倒数日 - ImDay</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192x192.png">
    <meta name="theme-color" content="#FFFFFF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="倒数日">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app" id="app">
        <!-- 列表页面 -->
        <div class="page" id="listPage">
            <header class="list-header">
                <h1>倒数日</h1>
                <button class="add-btn" onclick="showCreatePage()">+</button>
            </header>
            <main class="list-main">
                <div id="countdowns" class="countdown-grid"></div>
            </main>
        </div>

        <!-- 创建页面 -->
        <div class="page hidden" id="createPage">
            <header class="create-header">
                <button class="back-btn" onclick="showListPage()">←</button>
                <h1>新建倒数日</h1>
                <button class="save-btn" onclick="saveCountdown()">保存</button>
            </header>
            <main class="create-main">
                <div class="create-container">
                    <div class="create-card">
                        <div class="create-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 2V5M16 2V5M3.5 9.09H20.5M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M15.6947 13.7002H15.7037M11.9955 13.7002H12.0045M8.29431 13.7002H8.30329" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h2 class="create-title">创建新的纪念日</h2>
                        <p class="create-subtitle">记录重要时刻，让美好永不忘记</p>
                        
                        <form id="countdownForm" class="create-form">
                            <div class="form-group">
                                <label for="title">纪念日名称</label>
                                <div class="input-wrapper">
                                    <input type="text" id="title" placeholder="例如：生日、纪念日、考试倒计时..." required>
                                    <div class="input-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="date">选择日期</label>
                                <div class="date-input-wrapper">
                                    <input type="date" id="date" required>
                                    <div class="date-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M8 2V5M16 2V5M3.5 9.09H20.5M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="date-shortcuts">
                                    <button type="button" class="date-shortcut" onclick="setDateShortcut('today')">今天</button>
                                    <button type="button" class="date-shortcut" onclick="setDateShortcut('tomorrow')">明天</button>
                                    <button type="button" class="date-shortcut" onclick="setDateShortcut('week')">一周后</button>
                                    <button type="button" class="date-shortcut" onclick="setDateShortcut('month')">一个月后</button>
                                </div>
                            </div>
                            
                            <div class="preview-section" id="previewSection" style="display: none;">
                                <div class="preview-card">
                                    <div class="preview-title" id="previewTitle">预览</div>
                                    <div class="preview-content">
                                        <div class="preview-days" id="previewDays">0</div>
                                        <div class="preview-label" id="previewLabel">天</div>
                                    </div>
                                    <div class="preview-date" id="previewDate">选择日期</div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </main>
        </div>

        <!-- 详情页面 -->
        <div class="page hidden" id="detailPage">
            <header class="detail-header">
                <button class="back-btn" onclick="showListPage()">←</button>
                <div></div>
                <div></div>
            </header>
            <main class="detail-main">
                <div class="detail-card">
                    <h2 class="detail-title" id="detailMainTitle">标题</h2>
                    <div class="detail-content">
                        <div class="detail-days" id="detailDays">0</div>
                        <div class="detail-label" id="detailLabel">天</div>
                    </div>
                    <div class="detail-date" id="detailDate">2024年1月1日</div>
                </div>
            </main>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // 注册 Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>